= content_for :head_content do
  = javascript_include_tag "tooltipsy.min.js"
  = javascript_include_tag "timeline.js"
  = stylesheet_link_tag "timeline.css"

= content_for :h1 do
  = current_facility

.timeline_header
  = form_tag timeline_facility_reservations_path(current_facility), :method => :get, :id => "timeline_date_search" do
    .timeline_options
      = check_box_tag :show_cancelled, 1, params[:show_cancelled]
      = label_tag :show_cancelled
    %h3
      = human_date_with_day(@display_date)
      = hidden_field_tag 'date', format_usa_date(@display_date), :class => 'datepicker'

.clear
- @instruments.each do |instrument|
  .timeline_instrument
    %h4= instrument
    -# Add .reschedulable to enable drag/drop
    .timeline
      .unit_container
        - (instrument.reservations.for_date(@display_date) + ScheduleRule.unavailable_for_date(instrument, @display_date)).each do |reservation|
          = render :partial => "timeline", :locals => { :reservation => reservation }
        - if @display_date.beginning_of_day == Time.zone.now.beginning_of_day
          .current_time{:style => "left: #{datetime_left_position(Time.zone.now)}"}